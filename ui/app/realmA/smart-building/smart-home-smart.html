<link rel="import" href="smart-building-component.html">
<link rel="import" href="smart-building-style.html">
<link rel="import" href="smart-building-section.html">
<link rel="import" href="/static/src/or-checkbox/or-checkbox.html">

<dom-module id="smart-building-smart">
    <template>
        <style include="smart-building-style">
            .smartLabel {
                margin: 0 10px;
            }
        </style>

        <smart-building-section>
            <div class="layout horizontal center">
                <img height="30" src="smart-building/img/star.png"/>
                <!-- "All Smart" currently means enabling/disabling automatic scene switching based on schedule -->
                <div class="flex layout horizontal smartLabel">[[localize('All Smart')]]</div>
                <div class="layout horizontal">
                    <or-checkbox checked="[[residence.attributes.sceneTimerEnabled.value]]"
                                 on-change="onSmartToggleChange"></or-checkbox>
                </div>
            </div>
        </smart-building-section>

    </template>

    <script>
        class SmartBuildingSmart extends SmartBuildingComponent {
            static get is() {
                return "smart-building-smart";
            }

            ready() {
                super.ready();
                this.shadowRoot.host.classList.add("flex-none");
            }

            onSmartToggleChange(e) {
                this.sendAttributeEvent(
                    this.residence.id, e.detail ? "enableSceneTimer" : "disableSceneTimer", "REQUEST_START"
                );
            }
        }

        defineAppElement(SmartBuildingSmart, SmartBuildingSmart.is, "SmartBuildingSmart");
    </script>

</dom-module>
