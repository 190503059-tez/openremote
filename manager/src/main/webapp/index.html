<!DOCTYPE html>
<html>
<head>
    <title>OpenRemote Manager</title>

    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

    <script src="/static/3rdparty/keycloak/1.9.0.CR1/keycloak.js"></script>

    <script src="/static/gwt/Manager/Manager.nocache.js"></script>

    <script src="/static/3rdparty/mapbox-gl-js/0.14.1/mapbox-gl.js"></script>
    <link href="/static/3rdparty/mapbox-gl-js/0.14.1/mapbox-gl.css" rel="stylesheet"/>

    <script>
        window.keycloak = Keycloak("/master/identity/install/or-manager");
        keycloak.init({
            onLoad: 'login-required'
        }).success(function (authenticated) {
            // TODO maybe we should manually load GWT app and other resources here, after authentication...
            if (!authenticated) {
                alert('NOT AUTHENTICATED');
            } else {
                console.log("AUTHENTICATED...")
            }
        }).error(function () {
            alert('KEYCLOAK INIT FAILURE');
        });
    </script>

</head>
<body>

<iframe src="javascript:''"
        id="__gwt_historyFrame"
        style="position:absolute;width:0;height:0;border:0"></iframe>

<noscript>
    <div style="border: 1px solid red;">
        Your web browser must have JavaScript enabled
        in order for this application to display correctly.
    </div>
</noscript>

</body>
</html>