<dom-module id="or-toast">
    <script>
        class OpenRemoteToast extends Polymer.Element {

            static get is() {
                return "or-toast";
            }

            static get properties() {
                return {
                    toasts: openremote.toast.Toasts
                }
            }

            constructor() {
                super();

                // Could be configurable
                let toastDisplay = new openremote.toast.PopupToastDisplay(openremote.WIDGET_STYLE);

                // Register global
                openremote.TOASTS = new openremote.toast.Toasts(toastDisplay);

                // Register local if someone gets this element instance
                this.set("toasts", openremote.TOASTS);
            }

            ready() {
                super.ready();
            }

            connectedCallback() {
                super.connectedCallback();
            }
        }

        // Upgrade only when jsinterop components are ready
        window.addEventListener('ComponentsReady', function () {
            console.log("Upgrading element: " + OpenRemoteToast.is);
            customElements.define(OpenRemoteToast.is, OpenRemoteToast);
        });
    </script>

</dom-module>