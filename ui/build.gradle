task deleteNodeModules {
    doFirst {
        delete "${project(':openremote').projectDir}/node_modules"
    }
}

task build {
    dependsOn tasks.getByPath(":yarnInstall")

    // Add dependency to openremote ui build for custom projects
    // and also remove node_modules dir from openremote repo
    if (isCustomProject() && parent == rootProject) {
        dependsOn resolveTask(":ui:build"), deleteNodeModules        
    }
}

task installDist {
    dependsOn build
}

task modelWatch {
    dependsOn resolveTask(":ui:component:model:build"), resolveTask(":ui:component:rest:build")
}